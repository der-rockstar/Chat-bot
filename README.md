# Chat-bot

## Для чего нужна обработка

Обработа - демо пример чат-бота для WhatsApp на базе 1С, который может быть взят за основу для написания своих чат-ботов. Интеграция сделана с использованием http сервиса, предоставляемого [Green API](https://green-api.com/).

## Что потребуется, чтобы запустить бота

* Платформа 1С не ниже версии 8.3.10
* Два номера с учетками WhatsApp. Номера нужны, чтобы отправлять сообщения как бы "самому себе". При этом первый номер будет тот, с которого  мы будем писать команды чат-боту (далее ``клиентский номер``), а второй номер - с которого будет отвечать сам бот (далее ``номер бота``). Отправлять с одного номера не получится.
* Аккаунт в сервисе [Green API](https://green-api.com/). Подойдет бесплатный тариф "Разработчик".

## Как запустить бота:

1. Устанавливаем на телефон два приложения - обычный [WhatsApp](https://play.google.com/store/apps/details?id=com.whatsapp) и [Whatsapp Business](https://play.google.com/store/apps/details?id=com.whatsapp.w4b).

2. Один номер телефона регистрируем в WhatsApp, а другой в  Whatsapp Business.

3. Скачиваем [обработку чат-бота](https://github.com/green-api/whatsapp-chatbot-1c-example/releases/download/1.0/GreenAPI_ChatBot.epf),

4. Открываем обработку в режиме 1С Предприятие, переходим на вкладку ``Настройки`` и нажимаем на ``Помощник подключения``. Далее следуем инструкциям помощника. В помощнике будет предложено сканировать QR код. Сканируем его для ``номера бота``, с которого чат-бот будет писать на наш ``клиентский номер``.

![`Интерфейс помощника`](media/HelperReg.png)

5. Переходим на вкладку ``Чат-бот`` и нажимаем кнопку ``Запустить бота``.
6. Открываем WhatsApp, на котором зарегистрирован ``клиентский номер`` и пишем любое сообщение на ``номер бота``. Бот отвечает приветственным сообщением:

![`Чат-бот начало`](media/chatBotHello.png)

7. Бот запущен. Теперь мы можем с ним общаться. Например, если написать в ответ цифру 1, то получим список номенклатуры:
